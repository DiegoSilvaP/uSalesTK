{% extends 'core/base.html' %}
{% load static %}
{% block title %}Registro{% endblock %}
{% block content %}
<style>
  .errorlist {
    color: red;
  }

  label {
    display: none
  }
</style>
<main role="main">

  <div class="container">
    <div class="row py-4">
      <div class="col-md-3">
      </div>
      <div class="col-md-6">
        <div class="card bg-primary text-white">
          <div class="card-body">
            <h3 class="card-title"><b>Registro</b></h3>
            <form action="" method="post">{% csrf_token %}

              <div style="display:none">
                {{ form.errors }}
              </div>
              <div class="row">
                <div class="col-md-12">
                  <small class="form-text text-info">{{ form.username.help_text }}</small>
                  {{ form.username }}
                </div>
                <div class="col-md-6">

                  {{ form.first_name }}
                </div>
                <div class="col-md-6">
                  {{ form.last_name }}
                </div>
                <div class="col-md-12">
                  <small class="form-text text-info">{{ form.email.help_text }}</small>
                  {{ form.email }}
                </div>
                <div class="col-md-6">

                  {{ form.password1 }}
                </div>
                <div class="col-md-6">
                  {{ form.password2 }}
                </div>
                <small class="form-text text-info">{{ form.password1.help_text }}</small>
              </div>
              <p><input type="submit" class="btn btn-secondary btn-block text-white" value="Registrarse"></p>
            </form>
            <p>¬øYa tienes cuenta?</p>
            <a href="{% url 'login' %}" class="btn btn-outline-secondary btn-block">Iniciar sesi√≥n</a>
          </div>
        </div>
      </div>
      <div class="col-md-3"></div>
    </div>
  </div>
  <script>
    $(document).ready(function () {
      var errores = document.querySelectorAll('.errorlist');
      console.log(errores.length);

      for (let e = 1; e < errores.length; e++) {
        showError(errores[e].textContent);
        console.log(errores[e].textContent);
      }

      function showError(error) {
        $.growl.error({
          size: 'large',
          fixed: true,
          title: '<h5>Oops, algo ha ido mal üôÅ</h5>',
          message: "<p>" + error + "</p>"
        });
      }
    });
  </script>
</main>
{% endblock %}